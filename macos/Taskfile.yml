version: "3"

dotenv:
  - .env.local

tasks:
  default:
    cmds:
      - task --list-all
  rebuild:
    deps:
      - format
    cmds:
      - sudo nix flake update --option access-tokens "github.com=$(gh auth token)"
      - sudo nix run nix-darwin -- switch --flake .
  format:
    cmds:
      - nixfmt flake.nix
  skills:add:
    cmds:
      - |
        skills add anthropics/skills \
          --skill skill-creator \
          -g -y -a claude-code 
      - | 
        skills add vercel-labs/agent-skills \
        --skill find-skills \
          skill vercel-composition-patterns \
          skill vercel-react-native-skills \
          skill web-design-guidelines \
          -g -y -a claude-code 
  claude:plugin:add:
    cmds:
      - claude plugin marketplace add obra/superpowers-marketplace
      - claude plugin marketplace add yungweng/claude-lsp-servers
      - claude plugin marketplace add totto2727-dotfiles/agents
      - claude plugin install -s user totto2727@totto2727
      - claude plugin install -s user lsp-servers@claude-lsp-servers
      - claude plugin install -s user double-shot-latte@superpowers-marketplace
      - claude plugin install -s user superpowers@superpowers-marketplace
      - claude plugin install -s user superpowers@superpowers-marketplace
      - claude plugin install -s user Notion@claude-plugins-official
      - claude plugin install -s user claude-code-setup@claude-plugins-official
      - claude plugin install -s user claude-md-management@claude-plugins-official
      - claude plugin install -s user code-review@claude-plugins-official
      - claude plugin install -s user frontend-design@claude-plugins-official
      - claude plugin install -s user github@claude-plugins-official
      - claude plugin install -s user hookify@claude-plugins-official
      - claude plugin install -s user lsp-servers@claude-lsp-servers
      - claude plugin install -s user plugin-dev@claude-plugins-official
      - claude plugin install -s user pr-review-toolkit@claude-plugins-official
      - claude plugin install -s user security-guidance@claude-plugins-official
